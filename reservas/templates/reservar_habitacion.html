{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Luminar</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
</head>

<body>

    <div class="container">
        <div class="row">
            <div class="col d-flex justify-content-center">
                <div class="card bg-black text-white w-75 m-5">
                    <div class="card-header" style="border-bottom: solid 1px white;">
                        <h2 class="card-title">Registrar nuevo Hospedaje</h2>
                    </div>
                    <div class="card-body">
                        <form action="{% url 'reservar_habitacion' habitacion.id %}" method="POST">
                            {% csrf_token %}
                            <div class="row">
                                <div class="col-sm-6 mb-3 px-4">
                                    <label for="id_cedula" class="form-label fw-bold">C.Identidad:</label>
                                    <input type="text" class="form-control bg-black text-white border-dark"
                                        name="cedula" maxlength="20" required="" id="id_cedula">
                                </div>

                                <div class="col-6"></div>

                                <div class="col-sm-6 mb-3 px-4">
                                    <label for="id_cliente" class="form-label fw-bold">Nombres y Apellidos del
                                        cliente</label>
                                    <input type="text" class="form-control bg-black text-white border-dark"
                                        name="cliente" required="" id="id_cliente">
                                </div>

                                <div class="col-sm-6 mb-3 px-4">
                                    <label for="id_telefono" class="form-label fw-bold">Telefono:</label>
                                    <input type="text" class="form-control bg-black text-white border-dark"
                                        name="telefono" maxlength="20" required="" id="id_telefono">
                                </div>

                                <div class="col-sm-6 mb-3 px-4">
                                    <label for="id_email" class="form-label fw-bold">Email:</label>
                                    <input type="email" class="form-control bg-black text-white border-dark"
                                        name="email" maxlength="254" required="" id="id_email">
                                </div>

                                <div class="col-sm-6 mb-3 px-4">
                                    <label for="id_tipo_cliente" class="form-label fw-bold">Tipo cliente:</label>
                                    <select name="tipo_cliente" id="id_tipo_cliente"
                                        class="form-select bg-black text-white border-dark" required="">
                                        <option value="NORMAL">NORMAL</option>
                                        <option value="EMPRESARIO">EMPRESARIO</option>
                                    </select>
                                </div>
                            </div>

                            <div class="row" style="border-top: solid 1px white;">
                                <div class="col-sm-6 mb-3 px-4 pt-3">
                                    <label for="id_habitacion" class="form-label fw-bold">Habitacion:</label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-white fw-bold border-dark">No.</span>
                                        <input type="text" class="form-control bg-black text-white border-dark"
                                            name="habitacion" value="{{ habitacion.id }}" required=""
                                            id="id_habitacion">
                                    </div>
                                </div>

                                <div class="col-sm-6 mb-3 px-4 pt-3">
                                    <label for="id_fecha_reserva" class="form-label fw-bold">Fecha reserva:</label>
                                    <input type="date" class="form-control bg-black text-white border-dark"
                                        name="fecha_reserva" required="" id="id_fecha_reserva">
                                </div>

                                <div class="col-sm-6 mb-3 px-4">
                                    <label for="id_precio_habitacion" class="form-label fw-bold">Precio
                                        habitacion:</label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-white fw-bold border-dark">$</span>
                                        <input type="number" class="form-control bg-black text-white border-dark"
                                            name="precio_habitacion" value="{{ habitacion.precio }}" readonly=""
                                            id="id_precio_habitacion">
                                    </div>
                                </div>

                                <div class="col-sm-6 mb-3 px-4">
                                    <label for="id_tiempo" class="form-label fw-bold">Tiempo:</label>
                                    <input type="number" class="form-control bg-black text-white border-dark"
                                        name="tiempo" required="" id="id_tiempo">
                                </div>

                                <div class="col-sm-6 mb-3 px-4">
                                    <label for="id_tipo_pago" class="form-label fw-bold">Tipo pago:</label>
                                    <select name="tipo_pago" id="id_tipo_pago"
                                        class="form-select bg-black text-white border-dark" required="">
                                        <option value="Efectivo">Efectivo</option>
                                        <option value="Tarjeta_de_credito">Tarjeta de crédito</option>
                                    </select>
                                </div>

                                <div class="col-sm-6 mb-3 px-4" id="tarjeta-input-container" style="display: none;">
                                    <label for="id_numero_tarjeta" class="form-label fw-bold">Numero tarjeta:</label>
                                    <input type="text" class="form-control bg-black text-white border-dark"
                                        name="numero_tarjeta" value="None" id="id_numero_tarjeta">
                                </div>

                                <div class="w-100"></div>

                                <div class="col-sm-3 mb-3"></div>

                                <div class="col-sm-6 mb-3 px-4">
                                    <label for="id_total_pagar" class="form-label fw-bold">Total pagar:</label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-white fw-bold border-dark">$</span>
                                        <input type="number" class="form-control bg-black text-white border-dark"
                                            name="total_pagar" readonly id="id_total_pagar">
                                    </div>
                                </div>

                                <div class="col-sm-3 mb-3"></div>

                                <hr>

                                <div class="col text-end">
                                    <a href="{% url 'reserva' %}" class="btn btn-danger mx-2">Cancelar</a>
                                    <button class="btn btn-primary" type="submit" id="reservarButton">Agregar</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous">
        </script>

    <script src="{% static 'js/reservar_habitacion.js' %}"></script>

    <script>
        document.getElementById("id_tiempo").addEventListener("input", function () {
            // Obtener el valor del tiempo ingresado
            var tiempoInput = document.getElementById("id_tiempo");
            var tiempoValue = tiempoInput.value;

            // Calcular el total a pagar (suponiendo que hay una tarifa por hora)
            var precioHabitacion = parseFloat("{{ habitacion.precio }}");
            var tiempoFloat = parseFloat(tiempoValue.replace(":", ".")); // Convertir el formato de tiempo a un número
            var totalPagar = precioHabitacion * tiempoFloat;

            // Actualizar el campo "Total pagar"
            var totalPagarInput = document.getElementById("id_total_pagar");
            totalPagarInput.value = totalPagar.toFixed(2); // Redondear a dos decimales
        });
    </script>
</body>

</html>